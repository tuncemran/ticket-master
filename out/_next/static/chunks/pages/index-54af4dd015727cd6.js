(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9547)}])},9547:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(35666),s=n.n(r),i=n(85893),a=n(67294),c=n(1508),o=JSON.parse('{"w3":"[{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"getDeployedTickets\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"address[]\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[{\\"name\\":\\"OwnerName\\",\\"type\\":\\"string\\"},{\\"name\\":\\"OwnerFacebookAccount\\",\\"type\\":\\"string\\"},{\\"name\\":\\"TicketTitle\\",\\"type\\":\\"string\\"},{\\"name\\":\\"TicketDescription\\",\\"type\\":\\"string\\"},{\\"name\\":\\"TicketPriceInDollars\\",\\"type\\":\\"string\\"}],\\"name\\":\\"createTicket\\",\\"outputs\\":[],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"deployedTickets\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"address\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"}]"}'),u=new c.Z.eth.Contract(JSON.parse(o.w3),"0xD8C43F8A41720CD246A4bd6e50A27e17B3436575"),l=n(22655),d=(n(73014),n(32323)),h=n(80967),p=n(52190),f=n(60416),k=n(22479),m=n(40849),b=n(84540),x=n(52256);function v(e){var t=e.userAddress;return(0,i.jsxs)(x.Z,{className:"landing-notification-container",children:[(0,i.jsx)(x.Z.Content,{children:(0,i.jsx)(x.Z.Header,{style:{color:"#030e22"},children:"Metamask Login Status"})}),(0,i.jsxs)(x.Z.Content,{children:[(0,i.jsx)("div",{children:"This website is built with blockchain. In order to complete transactions here you need ethereum in your balance."}),(0,i.jsx)("br",{}),t.length>0?(0,i.jsxs)("div",{children:["User is logged in at address: ",t]}):(0,i.jsxs)("div",{children:["We can't seem to find your account. Please turn on Metamask or check instructions on how to use Metamask ",(0,i.jsx)("a",{href:"/metamask",children:"here"}),"."]})]})]})}var y=n(45150);function j(e){var t=e.ownerName,n=e.ownerFacebookAccount,r=e.ticketTitle,s=e.ticketDescription,a=e.ticketPriceInDollars,c=e.ticketAddress;return(0,i.jsx)("a",{href:"https://ticket-master.surge.sh/ticket/".concat(c),children:(0,i.jsxs)(x.Z,{style:{margin:0,float:"left",width:"300px",marginRight:"5%"},children:[(0,i.jsx)(p.Z,{src:"https://react.semantic-ui.com/images/avatar/large/matthew.png",wrapped:!0,ui:!1}),(0,i.jsxs)(x.Z.Content,{children:[(0,i.jsx)(x.Z.Header,{children:r}),(0,i.jsx)(x.Z.Meta,{children:(0,i.jsxs)("span",{className:"date",children:[t," - ",(0,i.jsx)("a",{href:n,children:"Check Me On Facebook"})]})}),(0,i.jsx)(x.Z.Description,{children:s})]}),(0,i.jsx)(x.Z.Content,{extra:!0,children:(0,i.jsxs)("a",{children:[(0,i.jsx)(y.Z,{name:"dollar"}),a]})})]})})}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n,r,s,i,a){try{var c=e[i](a),o=c.value}catch(u){return void n(u)}c.done?t(o):Promise.resolve(o).then(r,s)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){w(i,r,s,a,c,"next",e)}function c(e){w(i,r,s,a,c,"throw",e)}a(void 0)}))}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return!t||"object"!==O(t)&&"function"!==typeof t?g(e):t}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var s=S(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return D(this,n)}}var M=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(o,e);var t,n,r,a=_(o);function o(){var e;return T(this,o),Z(g(e=a.apply(this,arguments)),"state",{userAddress:[],allTickets:[],isCreateModalActive:!1,isLoaderActive:!1,ticketTitle:"",ticketDescription:"",name:"",facebookAccount:"",price:""}),Z(g(e),"getAllTickets",A(s().mark((function e(t){var n,r,i,a,c,o,d,h,p,f,k,m,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t){e.next=4;break}e.t0=this.props.tickets,e.next=7;break;case 4:return e.next=6,u.methods.getDeployedTickets().call();case 6:e.t0=e.sent;case 7:n=e.t0,r=[],e.t1=regeneratorRuntime.keys(n);case 10:if((e.t2=e.t1()).done){e.next=39;break}return i=e.t2.value,a=n[i],c=(0,l.Z)(a),e.next=16,c.methods.ownerName().call();case 16:return o=e.sent,e.next=19,c.methods.ownerFacebookAccount().call();case 19:return d=e.sent,e.next=22,c.methods.ticketTitle().call();case 22:return h=e.sent,e.next=25,c.methods.ticketDescription().call();case 25:return p=e.sent,e.next=28,c.methods.ticketPriceInDollars().call();case 28:return f=e.sent,e.next=31,c.methods.ticketStatus().call();case 31:return k=e.sent,e.next=34,c.methods.approvalStatus().call();case 34:m=e.sent,b={ownerName:o,ownerFacebookAccount:d,ticketTitle:h,ticketDescription:p,ticketPriceInDollars:f,ticketStatus:k,approvalStatus:m,ticketAddress:a},r.push(b),e.next=10;break;case 39:return e.abrupt("return",r);case 40:case"end":return e.stop()}}),e,this)})).bind(e)).bind(g(e))),Z(g(e),"onSubmitNewTicket",A(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoaderActive:!0,isCreateModalActive:!1}),e.next=3,u.methods.createTicket(this.state.name,this.state.facebookAccount,this.state.ticketTitle,this.state.ticketDescription,this.state.price).send({from:this.state.userAddress[0],gas:"1000000"});case 3:return e.next=5,this.getAllTickets(!0);case 5:t=e.sent,this.setState({allTickets:t}),this.setState({isLoaderActive:!1,isCreateModalActive:!1});case 8:case"end":return e.stop()}}),e,this)})).bind(e)).bind(g(e))),e}return t=o,r=[{key:"getInitialProps",value:function(){return A(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.methods.getDeployedTickets().call();case 2:return t=e.sent,e.abrupt("return",{tickets:t});case 4:case"end":return e.stop()}}),e)})))()}}],(n=[{key:"componentDidMount",value:function(){return A(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoaderActive:!0}),e.next=3,c.Z.eth.getAccounts();case 3:return t=e.sent,e.next=6,this.getAllTickets(!1);case 6:n=e.sent,this.setState({userAddress:t,allTickets:n}),this.setState({isLoaderActive:!1});case 9:case"end":return e.stop()}}),e,this)})).bind(this))()}},{key:"renderTickets",value:function(){return this.state.allTickets.map((function(e,t){if(!0===e.ticketStatus[3])return(0,i.jsx)(j,{ownerName:e.ownerName,ownerFacebookAccount:e.ownerFacebookAccount,ticketTitle:e.ticketTitle,ticketDescription:e.ticketDescription,ticketPriceInDollars:e.ticketPriceInDollars,ticketAddress:e.ticketAddress},t)}))}},{key:"renderModal",value:function(){var e=this;return(0,i.jsxs)(d.Z,{onClose:function(){return e.setState({isCreateModalActive:!1})},onOpen:function(){return e.setState({isCreateModalActive:!0})},open:this.state.isCreateModalActive,trigger:this.state.userAddress===[]?null:(0,i.jsx)(h.Z,{positive:!0,children:"Create a Ticket Ad"}),children:[(0,i.jsx)(d.Z.Header,{children:"Add a Ticket to be Sold"}),(0,i.jsxs)(d.Z.Content,{image:!0,children:[(0,i.jsx)(p.Z,{size:"medium",src:"https://react.semantic-ui.com/images/avatar/large/rachel.png",wrapped:!0}),(0,i.jsxs)(d.Z.Description,{children:[(0,i.jsx)(f.Z,{value:this.state.ticketTitle,onChange:function(t){return e.setState({ticketTitle:t.target.value})},label:"Ticket Title",placeholder:"Unit 1 Friday Ticket"})," ",(0,i.jsx)("br",{})," ",(0,i.jsx)("br",{}),(0,i.jsx)(f.Z,{value:this.state.ticketDescription,onChange:function(t){return e.setState({ticketDescription:t.target.value})},label:"Description",placeholder:"Early entree, be there before 10pm"})," ",(0,i.jsx)("br",{})," ",(0,i.jsx)("br",{}),(0,i.jsx)(f.Z,{value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},label:"Name",placeholder:"Put a name so that people know it is not fake"})," ",(0,i.jsx)("br",{})," ",(0,i.jsx)("br",{}),(0,i.jsx)(f.Z,{value:this.state.facebookAccount,onChange:function(t){return e.setState({facebookAccount:t.target.value})},label:"Facebook account",placeholder:"Put your facebook address so people can ask questions to you when necessary"})," ",(0,i.jsx)("br",{})," ",(0,i.jsx)("br",{}),(0,i.jsx)(f.Z,{value:this.state.price,onChange:function(t){return e.setState({price:t.target.value})},label:"Price in $ ( USD )",placeholder:"5"})," ",(0,i.jsx)("br",{})," ",(0,i.jsx)("br",{})]})]}),(0,i.jsxs)(d.Z.Actions,{children:[(0,i.jsx)(h.Z,{color:"black",onClick:function(){return e.setState({isCreateModalActive:!1,ticketTitle:"",ticketDescription:"",name:"",facebookAccount:"",price:""})},children:"Nope"}),(0,i.jsx)(h.Z,{content:"Create My Ticket",labelPosition:"right",icon:"checkmark",onClick:function(){return e.onSubmitNewTicket()},positive:!0})]})]})}},{key:"render",value:function(){return(0,i.jsxs)("div",{children:[this.state.isLoaderActive?(0,i.jsx)(k.Z,{active:!0,inverted:!0,children:(0,i.jsxs)(m.Z,{size:"large",children:["Blockchain needs to confirm this transaction to make this experience safe for everyone! ",(0,i.jsx)("br",{})," ",(0,i.jsx)("br",{})," This usually takes 10-15 seconds. At the meantime please wait and do not refresh the website please..."]})}):null,(0,i.jsx)(b.Z,{}),(0,i.jsx)(v,{userAddress:this.state.userAddress}),(0,i.jsx)("div",{style:{width:"100%",justifyContent:"center",display:"flex",marginTop:30},children:this.renderModal()}),(0,i.jsx)("div",{style:{margin:"auto",marginTop:40,display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridGap:20,width:"70%"},children:this.renderTickets()})]})}}])&&C(t.prototype,n),r&&C(t,r),o}(a.Component)}},function(e){e.O(0,[749,482,606,599,432,774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);